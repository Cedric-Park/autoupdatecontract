# 게임더하기 계약 정보 자동화 알림 프로그램 개발 체크리스트

**개발 언어: Python**

## 1. 사이트 로그인 자동화
- [x] 게임더하기 관리자 페이지(@https://gsp.kocca.kr/admin) 자동 로그인 구현
  - [x] ID: com2us30, PW: com2us!@#$
  - [x] 로그인 성공 여부 확인

## 2. 계약 관리 페이지 이동
- [x] 계약 관리 페이지(@https://gsp.kocca.kr/admin/serviceReq/serviceReqListPage.do)로 자동 이동

## 3. 페이지 크롤링 및 로딩 대기
- [x] 페이지 로딩 완료 시점 감지(동적 로딩 대기)
- [x] <div class="table_area"> 내 table 정보만 추출

## 4. 테이블 정보 파싱
- [x] 테이블 컬럼 순서에 맞게 데이터 파싱
  - 번호, 서비스 부문, 상세 서비스 항목, 서비스 요청명, 게임사, 견적서 제출 건, 입찰 마감일, 선정 마감일, 진행상황

## 5. 입찰 마감일 필터링
- [x] 입찰 마감일이 2025년도인 항목만 추출

## 6. 구글 시트 연동
- [x] 구글 시트에 신규 항목 업데이트(중복 방지: 기존 동일 내용 있으면 skip)

## 7. 담당자 이메일 발송
- [x] 게임사 명 기준 담당자 이메일 주소 매핑(구글 시트 "담당자정보" 시트 활용)
- [x] 신규 업데이트 시 담당자에게 이메일 발송

## 8. 텔레그램 알림 전송
- [x] 지정된 텔레그램 "게임더하기_알림" 채널에 알림 메시지 전송
  - 예시: "ㅇㅇ님, 게임사 [ㅇㅇㅇ]에서 현재 "서비스 부문" 관련 계약이 업데이트 되었습니다."

## 9. 예외 및 오류 처리
- [ ] 로그인 실패, 크롤링 실패, 시트 연동 실패, 이메일/텔레그램 전송 실패 등 예외 처리

## 10. 자동화 스케줄링
- [x] 1시간마다 자동 실행(스케줄러 적용)
- [x] 주기적 실행(예: 매일/매시간 등) 또는 수동 트리거 지원

## 11. 실행파일/배치파일 제공
- [x] .bat 파일 제공(더블 클릭 실행)
- [ ] PyInstaller 등으로 exe 파일 제공(선택)

## 12. 네이버웍스 알림 연동
- [ ] 네이버웍스 메시지 API/봇 연동 및 사내 대화방 알림

## 1-1. 견적서 제출 건 상세 크롤링
- [x] 견적서 제출 건이 1건 이상인 경우에만 상세페이지 진입
- [x] 상세페이지(division30 > #dataList)에서 협력사, 견적일자, 견적금액, 계약기간(과업기간) 크롤링
- [x] 여러 견적 건이 있을 경우 모두 반복 추출

## 13. 코드 모듈화 및 유지보수성 개선 ✨ NEW
- [x] **login_and_crawl.py 파일 분리** (890줄 → 249줄로 축소)
  - [x] `browser_utils.py`: 브라우저/로그인/크롤링 관련 함수
  - [x] `gsheet_manager.py`: 구글 시트 처리 관련 함수  
  - [x] `notification.py`: 이메일/텔레그램 알림 관련 함수
  - [x] `login_and_crawl.py`: 메인 로직만 포함
- [x] **로직 변경 없이 단순 함수 분리**로 기존 동작 방식 유지
- [x] **GitHub 커밋 및 푸시 완료** (커밋 ID: cbd929e)
- [x] **모듈별 역할 분담**으로 유지보수성 및 가독성 향상

## 14. 최종계약체결 자동화 기능 ✨ NEW  
- [x] **진행상황 변경 감지**: "최종계약체결" 상태 변경 우선 처리
- [x] **우선순위 기반 처리**: 최종계약체결(1순위) > 견적서 건수 변경(2순위)
- [x] **계약 상세 정보 추출**: 진행상황이 "최종계약체결"인 협력사만 선별하여 계약 정보 추출
- [x] **K,L,M,N열 자동 업데이트**: 계약협력사, 계약금액, 업무시작일, 업무종료일 자동 입력
- [x] **JavaScript 페이지 이동**: `go_Page()` 함수 사용으로 정확한 페이지 이동 구현

## 15. 알림 시스템 개선 🔔 TODO
- [ ] **notification.py 기능 복원**: 현재 미사용 중인 알림 기능들 재활성화
- [ ] **신규 계약 등록 알림**: `send_update_emails()` 함수 활용한 담당자별 이메일 발송
- [ ] **계약 변경사항 알림**: `make_change_alert()` 함수 활용한 변경 내용 상세 알림
- [ ] **최종계약체결 특별 알림**: 계약 체결시 중요도 높은 알림 발송
- [ ] **선별적 알림 정책**: 중요한 변경사항에만 알림 발송하도록 필터링

---

## 📋 최근 업데이트 (2025-01-23)
- **모듈화 작업 완료**: 하나의 큰 파일을 역할별로 4개 모듈로 분리
- **코드 라인 수 대폭 감소**: 메인 파일 890줄 → 249줄 (72% 감소)
- **유지보수성 향상**: 각 기능별로 독립적인 파일 관리 가능 